# Public Domain (-) 2011 The Ampify Authors.
# See the Ampify UNLICENSE file for details.

generate:
- js/base.js:
    source:
      # text parsing
      - %(AMPIFY_ROOT)s/third_party/jslibs/twitter/twttr.txt.js
      # jquery plugins
      - %(AMPIFY_ROOT)s/third_party/jslibs/jquery/plugins/jquery.cookie.js
      - %(AMPIFY_ROOT)s/third_party/jslibs/jquery/plugins/jquery.geolocation.js
      - %(AMPIFY_ROOT)s/third_party/jslibs/jquery/plugins/jquery.parsequery.js
      - %(AMPIFY_ROOT)s/third_party/jslibs/jquery/plugins/jquery.sha1.js
      - %(AMPIFY_ROOT)s/third_party/jslibs/jquery/plugins/jquery.support.fixedPosition.js
      - %(AMPIFY_ROOT)s/third_party/jslibs/jquery/plugins/jquery.url.js
      # backbone
      - %(AMPIFY_ROOT)s/third_party/jslibs/underscore/underscore.js
      - %(AMPIFY_ROOT)s/third_party/jslibs/backbone/backbone.js
      # dev only
      - %(AMPIFY_ROOT)s/third_party/jslibs/jquery/plugins/jquery.mockjax.js
      - static/src/coffee/dev/mock.coffee
    

- js/mobile.js:
    source: 
      # jquery mobile
      - %(AMPIFY_ROOT)s/third_party/jslibs/jquery/mobile/jquery.ui.widget.js
      - %(AMPIFY_ROOT)s/third_party/jslibs/jquery/mobile/jquery.mobile.widget.js
      - %(AMPIFY_ROOT)s/third_party/jslibs/jquery/mobile/jquery.mobile.media.js
      - %(AMPIFY_ROOT)s/third_party/jslibs/jquery/mobile/jquery.mobile.support.js
      - %(AMPIFY_ROOT)s/third_party/jslibs/jquery/mobile/jquery.mobile.vmouse.js
      - %(AMPIFY_ROOT)s/third_party/jslibs/jquery/mobile/jquery.mobile.event.js
      - %(AMPIFY_ROOT)s/third_party/jslibs/jquery/mobile/jquery.mobile.page.js
      - %(AMPIFY_ROOT)s/third_party/jslibs/jquery/mobile/jquery.mobile.core.js
      - %(AMPIFY_ROOT)s/third_party/jslibs/jquery/mobile/jquery.mobile.navigation.js
      - %(AMPIFY_ROOT)s/third_party/jslibs/jquery/mobile/jquery.mobile.transition.js
      - %(AMPIFY_ROOT)s/third_party/jslibs/jquery/mobile/jquery.mobile.fixHeaderFooter.js
      - %(AMPIFY_ROOT)s/third_party/jslibs/jquery/mobile/jquery.mobile.forms.checkboxradio.js
      - %(AMPIFY_ROOT)s/third_party/jslibs/jquery/mobile/jquery.mobile.forms.textinput.js
      - %(AMPIFY_ROOT)s/third_party/jslibs/jquery/mobile/jquery.mobile.forms.select.js
      - %(AMPIFY_ROOT)s/third_party/jslibs/jquery/mobile/jquery.mobile.buttonMarkup.js
      - %(AMPIFY_ROOT)s/third_party/jslibs/jquery/mobile/jquery.mobile.forms.button.js
      - %(AMPIFY_ROOT)s/third_party/jslibs/jquery/mobile/jquery.mobile.forms.slider.js
      - %(AMPIFY_ROOT)s/third_party/jslibs/jquery/mobile/jquery.mobile.collapsible.js
      - %(AMPIFY_ROOT)s/third_party/jslibs/jquery/mobile/jquery.mobile.controlGroup.js
      - %(AMPIFY_ROOT)s/third_party/jslibs/jquery/mobile/jquery.mobile.fieldContain.js
      - %(AMPIFY_ROOT)s/third_party/jslibs/jquery/mobile/jquery.mobile.listview.js
      - %(AMPIFY_ROOT)s/third_party/jslibs/jquery/mobile/jquery.mobile.listview.filter.js
      - %(AMPIFY_ROOT)s/third_party/jslibs/jquery/mobile/jquery.mobile.dialog.js
      - %(AMPIFY_ROOT)s/third_party/jslibs/jquery/mobile/jquery.mobile.navbar.js
      - %(AMPIFY_ROOT)s/third_party/jslibs/jquery/mobile/jquery.mobile.grid.js
      - %(AMPIFY_ROOT)s/third_party/jslibs/jquery/mobile/jquery.mobile.init.js
    

- js/mobone.js:
    source: 
      - raw: |
          // Public Domain (-) 2011 The Ampify Authors.
          // See the Ampify UNLICENSE file for details.
          (function ($) {
      - static/src/coffee/mobone/*.coffee
      - raw: |
          })(jQuery);
    uglify:
      - --define-from-module
      - config
    profile.dev:
      uglify:
        - --beautify
        - --no-mangle
        - --no-squeeze
        - --define-from-module
        - config-dev
    

- js/togethr.js:
    source: 
      - raw: |
          // Public Domain (-) 2011 The Ampify Authors.
          // See the Ampify UNLICENSE file for details.
          (function ($) {
      - static/src/coffee/togethr/*.coffee
      - raw: |
          })(jQuery);
    uglify:
      - --define-from-module
      - config
    profile.dev:
      uglify:
        - --beautify
        - --no-mangle
        - --no-squeeze
        - --define-from-module
        - config-dev
    


- js/tests.js:
    source: 
      - %(AMPIFY_ROOT)s/third_party/jslibs/jquery/plugins/jquery.mockjax.js
      - static/tests/test_*.coffee
    uglify:
      - --beautify
      - --no-mangle
      - --no-squeeze
      - --define-from-module
      - config-dev
    

- gfx/*:
    source: %(AMPIFY_ROOT)s/third_party/togethr-resources/gfx/*
    type: binary


- css/site.css:
    source: 
      - raw: |
          /* Public Domain (-) 2011 The Ampify Authors.
           * See the Ampify UNLICENSE file for details. */
      - static/src/sass/site.sass
    depends: static/src/sass/*.sass



prereqs:
- static/build/js/config.js:
    source: static/etc/config.coffee
    compressed: false

- static/build/js/config-dev.js:
    source: static/etc/config-dev.coffee
    compressed: false



output.directory: static/build
output.hashed: false # true when we run this from the backend
output.manifest: static/build/assets.json

env:
  NODE_PATH.prefix: static/build/js


profile.dev:
  css.compressed: false
  js.compressed: false

